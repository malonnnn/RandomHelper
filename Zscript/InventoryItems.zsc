Class CommonItemFeatures : CustomInventory
{
  int price;
  Default
  {
    +Inventory.HubPower
    +Inventory.PersistentPower
    +Inventory.InvBar
    +SpriteAngle
    Scale 0.5;
    SpriteAngle 180;
    Inventory.MaxAmount 999;
    DamageFactor "Companion", 0.0;
  }
  States
  {
    Pickup:
      TNT1 A 0
      {
        GiveInventory(GetClassName(), 1);
        GiveInventory("CompanionAmmo", 1);
      }
      Stop;
  }
}

Class MarineCompanionFistItem : CommonItemFeatures
{
  Default
  {
    Tag "Berserk Marine";
    Inventory.PickupMessage "Got a Berserk Marine!";
    cameraHeight 20;
  }
  States
  {
    Spawn:
      ALY1 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionChainsawItem : CommonItemFeatures
{
  Default
  {
    Tag "Chainsaw Marine";
    Inventory.PickupMessage "Got a Chainsaw Marine!";
    cameraHeight 20;
  }
  States
  {
    Spawn:
      ALY7 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionPistolItem : CommonItemFeatures
{
  Default
  {
    Tag "Pistol Marine";
    Inventory.PickupMessage "Got a Pistol Marine!";
    cameraHeight 20;
  }
  States
  {
    Spawn:
      ALY2 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionSGItem : CommonItemFeatures
{
  Default
  {
    Tag "Shotgun Marine";
    Inventory.PickupMessage "Got a Shotgun Marine!";
    cameraHeight 30;
  }
  States
  {
    Spawn:
      ALY5 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionSSGItem : CommonItemFeatures
{
  Default
  {
    Tag "Super Shotgun Marine";
    Inventory.PickupMessage "Got a Super Shotgun Marine!";
    cameraHeight 50;
  }
  States
  {
    Spawn:
      AL11 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionCGItem : CommonItemFeatures
{
  Default
  {
    Tag "Chaingun Marine";
    Inventory.PickupMessage "Got a Chaingun Marine!";
    cameraHeight 50;
  }
  States
  {
    Spawn:
      ALY4 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionRocketItem : CommonItemFeatures
{
  Default
  {
    Tag "Rocket Launcher Marine";
    Inventory.PickupMessage "Got a Rocket Launcher Marine!";
    cameraHeight 100;
  }
  States
  {
    Spawn:
      ALY9 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionPlasmaItem : CommonItemFeatures
{
  Default
  {
    Tag "Plasma Rifle Marine";
    Inventory.PickupMessage "Got a Plasma Rifle Marine!";
    cameraHeight 70;
  }
  States
  {
    Spawn:
      ALY8 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionBFG9000Item : CommonItemFeatures
{
  Default
  {
    Tag "BFG9000 Marine";
    Inventory.PickupMessage "Got a BFG9000 Marine!";
    cameraHeight 150;
  }
  States
  {
    Spawn:
      AL10 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionBFG10KItem : CommonItemFeatures
{
  Default
  {
    Tag "BFG10K Marine";
    Inventory.PickupMessage "Got a BFG10K Marine!";
    cameraHeight 150;
  }
  States
  {
    Spawn:
      AL15 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionGLItem : CommonItemFeatures
{
  Default
  {
    Tag "Grenade Launcher Marine";
    Inventory.PickupMessage "Got a Grenade Launcher Marine!";
    cameraHeight 70;
  }
  States
  {
    Spawn:
      AL14 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionHSMissileItem : CommonItemFeatures
{
  Default
  {
    Tag "Heat Seeking Missile Marine";
    Inventory.PickupMessage "Got a Heat Seeking Missile Marine!";
    cameraHeight 125;
  }
  States
  {
    Spawn:
      AL13 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionRailgunItem : CommonItemFeatures
{
  Default
  {
    Tag "Railgun Marine";
    Inventory.PickupMessage "Got a Railgun Marine!";
    cameraHeight 60;
  }
  States
  {
    Spawn:
      AL12 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionSniperItem : CommonItemFeatures
{
  Default
  {
    Tag "Sniper Marine";
    Inventory.PickupMessage "Got a Sniper Marine!";
    cameraHeight 80;
  }
  States
  {
    Spawn:
      AL17 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionFlameThrowerItem : CommonItemFeatures
{
  Default
  {
    Tag "Flame Thrower Marine";
    Inventory.PickupMessage "Got a Flame Thrower Marine!";
    cameraHeight 60;
  }
  States
  {
    Spawn:
      AL16 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionMGItem : CommonItemFeatures
{
  Default
  {
    Tag "Machine Gun Marine";
    Inventory.PickupMessage "Got a Machine Gun Marine!";
    cameraHeight 40;
  }
  States
  {
    Spawn:
      ALY3 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarineCompanionMinigunItem : CommonItemFeatures
{
  Default
  {
    Tag "Minigun Marine";
    Inventory.PickupMessage "Got a Minigun Marine!";
    cameraHeight 70;
  }
  States
  {
    Spawn:
      ALY6 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionZombieManItem : CommonItemFeatures
{
  Default
  {
    Tag "Zombie Man";
    Inventory.PickupMessage "Got a Zombie Man!";
    cameraHeight 1;
  }
  States
  {
    Spawn:
      POSS A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className = className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionShotgunGuyItem : CommonItemFeatures
{
  Default
  {
    Tag "Shotgun Guy";
    Inventory.PickupMessage "Got a Shotgun Guy!";
    cameraHeight 5;
  }
  States
  {
    Spawn:
      SPOS A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionChaingunGuyItem : CommonItemFeatures
{
  Default
  {
    Tag "Chaingun Guy";
    Inventory.PickupMessage "Got a Chaingun Guy!";
    cameraHeight 15;
  }
  States
  {
    Spawn:
      CPOS A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionDemonItem : CommonItemFeatures
{
  Default
  {
    Tag "Demon";
    Inventory.PickupMessage "Got a Demon!";
    cameraHeight 3;
  }
  States
  {
    Spawn:
      SARG A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionSpectreItem : CompanionDemonItem
{
  Default
  {
    Tag "Spectre";
    Inventory.PickupMessage "Got a Spectre!";
    RenderStyle "OptFuzzy";
    Inventory.Icon "SARGZ0";
  }
}

class CompanionLostSoulItem : CommonItemFeatures
{
  Default
  {
    Tag "Lost Soul";
    Inventory.PickupMessage "Got a Lost Soul!";
    cameraHeight 3;
    Scale 0.6;
  }
  States
  {
    Spawn:
      SKUL A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionCacodemonItem : CommonItemFeatures
{
  Default
  {
    Tag "Cacodemon";
    Inventory.PickupMessage "Got a Cacodemon!";
    cameraHeight 50;
    Scale 0.4;
  }
  States
  {
    Spawn:
      HEAD A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionPainElementalItem : CommonItemFeatures
{
  Default
  {
    Tag "Pain Elemental";
    Inventory.PickupMessage "Got a Pain Elemental!";
    cameraHeight 150;
    Scale 0.38;
  }
  States
  {
    Spawn:
      PAIN A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionBaronOfHellItem : CommonItemFeatures
{
  Default
  {
    Tag "Baron of Hell";
    Inventory.PickupMessage "Got a Baron of Hell!";
    cameraHeight 150;
    Scale 0.4;
  }
  States
  {
    Spawn:
      BOSS A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionHellKnightItem : CompanionBaronOfHellItem
{
  Default
  {
    Tag "Hell Knight";
    Inventory.PickupMessage "Got a Hell Knight!";
    cameraHeight 75;
    Scale 0.4;
  }
  States
  {
    Spawn:
      BOS2 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionArachnotronItem : CommonItemFeatures
{
  Default
  {
    Tag "Arachnotron";
    Inventory.PickupMessage "Got an Arachnotron!";
    cameraHeight 60;
    Scale 0.3;
  }
  States
  {
    Spawn:
      BSPI A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionArchvileItem : CommonItemFeatures
{
  Default
  {
    Tag "Archvile";
    Inventory.PickupMessage "Got an Archvile!";
    cameraHeight 30;
    Scale 0.35;
  }
  States
  {
    Spawn:
      VILE A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionFatsoItem : CommonItemFeatures
{
  Default
  {
    Tag "Mancubus";
    Inventory.PickupMessage "Got a Mancubus!";
    cameraHeight 40;
    Scale 0.4;
  }
  States
  {
    Spawn:
      FATT A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionCyberdemonItem : CommonItemFeatures
{
  Default
  {
    Tag "Cyberdemon";
    Inventory.PickupMessage "Got a Cyberdemon!";
    cameraHeight 250;
    Scale 0.28;
  }
  States
  {
    Spawn:
      CYBR A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionSpiderMastermindItem : CommonItemFeatures
{
  Default
  {
    Tag "Spider Mastermind";
    Inventory.PickupMessage "Got a Spider Mastermind!";
    cameraHeight 200;
    Scale 0.15;
  }
  States
  {
    Spawn:
      SPID A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionWolfensteinSSItem : CommonItemFeatures
{
  Default
  {
    Tag "Wolfenstein SS";
    Inventory.PickupMessage "Got a Wolfenstein SS!";
    cameraHeight 10;
  }
  States
  {
    Spawn:
      SSWV A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionRevenantItem : CommonItemFeatures
{
  Default
  {
    Tag "Revenant";
    Inventory.PickupMessage "Got a Revenant!";
    cameraHeight 60;
    Scale 0.35;
  }
  States
  {
    Spawn:
      SKEL A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class CompanionDoomImpItem : CommonItemFeatures
{
  Default
  {
    Tag "Imp";
    Inventory.PickupMessage "Got an Imp!";
    cameraHeight 10;
  }
  States
  {
    Spawn:
      TROO A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class BelphegorItem : CommonItemFeatures
{
  Default
  {
    Tag "Belphagor";
    Inventory.PickupMessage "Got a Belphegor!";
    cameraHeight 100;
    Scale 0.4;
  }
  States
  {
    Spawn:
      BOS3 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class AfritItem : CommonItemFeatures
{
  Default
  {
    Tag "Afrit";
    Inventory.PickupMessage "Got an Afrit!";
    cameraHeight 100;
    Inventory.Icon "FRITV0";
    Scale 0.4;
  }
  States
  {
    Spawn:
      FRIT A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MarauderItem : CommonItemFeatures
{
  Default
  {
    Tag "Marauder";
    Inventory.PickupMessage "Got a Marauder!";
    cameraHeight 60;
    Scale 0.48;
  }
  States
  {
    Spawn:
      MAUD A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class ArachnophyteItem : CommonItemFeatures
{
  Default
  {
    Tag "Arachnophyte";
    Inventory.PickupMessage "Got an Arachnophyte!";
    cameraHeight 200;
    Scale 0.2;
  }
  States
  {
    Spawn:
      APYT A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class ArchonOfHellItem : CommonItemFeatures
{
  Default
  {
    Tag "Archon of Hell";
    Inventory.PickupMessage "Got an Archon of Hell!";
    cameraHeight 100;
    Scale 0.4;
  }
  States
  {
    Spawn:
      BOS4 A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

Class MurderBallItem : CommonItemFeatures
{
  Default
  {
    Tag "Murder Ball";
    Inventory.PickupMessage "Got a Murder Ball!";
    cameraHeight 999;
  }
  States
  {
    Spawn:
      BERS A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}

class ArachnobaronItem : CommonItemFeatures
{
  Default
  {
    Tag "Arachnobaron";
    Inventory.PickupMessage "Got an Arachnobaron!";
    cameraHeight 100;
    Scale 0.3;
  }
  States
  {
    Spawn:
      ARBR A -1;
      Stop;
    Use:
      TNT1 A 0
      {
        let p = players[PlayerNumber()].mo;
        invoker.price = invoker.cameraheight;
        int balance = p.CountInv("CompanionAmmo");
        if(Utilities.canAfford(balance, invoker.price))
        {
          p.TakeInventory("CompanionAmmo", invoker.price);
          let g = Globals(EventHandler.Find("Globals"));
          String className = invoker.GetClassName();
          className.Left(className.Length() - 4);
          g.createCompanion(className, p.pos, p, invoker.price, invoker.GetTag());
          return true;
        }
        return false;
      }
      Stop;
  }
}